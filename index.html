<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MK-OSINT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <style>
        :root {
            --primary: #00f3ff;
            --secondary: #9933ff;
            --background: #0a0e17;
            --panel: #121725;
            --text: #e0e0ff;
            --highlight: #ff00a5;
            --success: #00ff88;
            --warning: #ffcc00;
            --danger: #ff3366;
            --glass: rgba(18, 23, 37, 0.7);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: var(--background);
            color: var(--text);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            width: 100%;
        }
        
        #background-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--background);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
        }
        
        .preloader__logo {
            width: 120px;
            height: 120px;
            border: 4px solid var(--primary);
            border-radius: 50%;
            position: relative;
            animation: pulse 2s infinite;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .preloader__logo::before {
            content: "";
            position: absolute;
            width: 70%;
            height: 70%;
            border: 3px solid var(--secondary);
            border-radius: 50%;
            animation: pulse2 2s infinite 0.3s;
        }
        
        .preloader__logo::after {
            content: "MK";
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 3px;
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
        }
        
        .preloader__progress {
            width: 80%;
            max-width: 300px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            margin-top: 40px;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .preloader__bar {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            box-shadow: 0 0 10px var(--primary);
            transition: width 0.5s ease;
        }
        
        .preloader__text {
            margin-top: 20px;
            font-size: 14px;
            opacity: 0.7;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 243, 255, 0.4); }
            70% { box-shadow: 0 0 0 20px rgba(0, 243, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 243, 255, 0); }
        }
        
        @keyframes pulse2 {
            0% { box-shadow: 0 0 0 0 rgba(153, 51, 255, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(153, 51, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(153, 51, 255, 0); }
        }
        
        header {
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 100;
            background: rgba(10, 14, 23, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            width: 100%;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
        }
        
        .logo__icon {
            width: 36px;
            height: 36px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            flex-shrink: 0;
        }
        
        .logo__icon::before {
            content: "";
            position: absolute;
            width: 18px;
            height: 18px;
            border: 2px solid var(--secondary);
            border-radius: 50%;
        }
        
        .logo__text {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
        }
        
        .logo__text span {
            color: var(--text);
            opacity: 0.7;
            font-weight: 400;
            font-size: 12px;
            display: block;
            letter-spacing: normal;
            white-space: nowrap;
        }
        
        nav {
            display: flex;
            align-items: center;
            gap: 8px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            margin-right: 8px;
        }
        
        nav::-webkit-scrollbar {
            display: none;
        }
        
        .nav__item {
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            color: var(--text);
            text-decoration: none;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .nav__item:hover, .nav__item.active {
            background: rgba(255,255,255,0.05);
        }
        
        .nav__item.active::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 3px;
        }
        
        .user {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.05);
            padding: 6px 10px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .user:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .user__avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            color: white;
            font-size: 14px;
        }
        
        .user__name {
            font-size: 13px;
            font-weight: 600;
            display: none;
        }
        
        .container {
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }
        
        .sidebar {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            height: fit-content;
            position: fixed;
            left: -100%;
            top: 0;
            bottom: 0;
            width: 260px;
            z-index: 200;
            transition: all 0.3s ease;
            overflow-y: auto;
        }
        
        .sidebar.active {
            left: 0;
        }
        
        .search {
            position: relative;
        }
        
        .search__input {
            width: 100%;
            padding: 10px 15px;
            padding-left: 40px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: var(--text);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .search__input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 243, 255, 0.2);
        }
        
        .search__icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255,255,255,0.3);
            font-size: 16px;
        }
        
        .menu__title {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.4);
            margin-bottom: 10px;
        }
        
        .menu__list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .menu__item {
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text);
            text-decoration: none;
        }
        
        .menu__item:hover, .menu__item.active {
            background: rgba(255,255,255,0.05);
        }
        
        .menu__item.active {
            color: var(--primary);
            font-weight: 600;
        }
        
        .menu__icon {
            font-size: 16px;
            width: 20px;
            text-align: center;
        }
        
        .main-content {
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 20px;
            width: 100%;
        }
        
        .page-header {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .page-title {
            font-size: 22px;
            font-weight: 700;
        }
        
        .page-subtitle {
            font-size: 14px;
            color: rgba(255,255,255,0.5);
            margin-top: -5px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 15px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            border: none;
            white-space: nowrap;
        }
        
        .btn--primary {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 5px 15px rgba(0, 243, 255, 0.2);
        }
        
        .btn--primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 243, 255, 0.3);
        }
        
        .btn--outline {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text);
        }
        
        .btn--outline:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .btn__icon {
            font-size: 14px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 100%;
        }
        
        .card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            width: 100%;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-color: rgba(255,255,255,0.1);
        }
        
        .card__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card__title {
            font-size: 16px;
            font-weight: 600;
        }
        
        .card__subtitle {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
            margin-top: 4px;
        }
        
        .card__menu {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .card__menu:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .card__content {
            flex: 1;
            width: 100%;
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            width: 100%;
        }
        
        .stat {
            padding: 15px;
            background: rgba(255,255,255,0.02);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .stat__value {
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .stat__label {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
        }
        
        .stat__icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .stat__icon--blue {
            background: rgba(0, 243, 255, 0.1);
            color: var(--primary);
        }
        
        .stat__icon--purple {
            background: rgba(153, 51, 255, 0.1);
            color: var(--secondary);
        }
        
        .stat__icon--green {
            background: rgba(0, 255, 136, 0.1);
            color: var(--success);
        }
        
        .stat__icon--yellow {
            background: rgba(255, 204, 0, 0.1);
            color: var(--warning);
        }
        
        .table-container {
            overflow-x: auto;
            width: 100%;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.1) transparent;
            border-radius: 10px;
        }
        
        .table-container::-webkit-scrollbar {
            height: 6px;
        }
        
        .table-container::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .table-container::-webkit-scrollbar-thumb {
            background-color: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            min-width: 700px;
        }
        
        .data-table th {
            padding: 12px 15px;
            text-align: left;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.5);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: sticky;
            top: 0;
            background: var(--panel);
            z-index: 10;
        }
        
        .data-table td {
            padding: 12px 15px;
            font-size: 13px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .data-table tr:hover {
            background: rgba(255,255,255,0.02);
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        .data-table__status {
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            display: inline-block;
        }
        
        .data-table__status--active {
            background: rgba(0, 255, 136, 0.1);
            color: var(--success);
        }
        
        .data-table__status--pending {
            background: rgba(255, 204, 0, 0.1);
            color: var(--warning);
        }
        
        .data-table__status--inactive {
            background: rgba(255, 51, 102, 0.1);
            color: var(--danger);
        }
        
        .data-table__actions {
            display: flex;
            gap: 8px;
        }
        
        .data-table__action {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .data-table__action:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            height: 250px;
        }
        
        .activity-feed {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .activity-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .activity-item:hover {
            background: rgba(255,255,255,0.02);
        }
        
        .activity-item__icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .activity-item__content {
            flex: 1;
            min-width: 0;
        }
        
        .activity-item__title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .activity-item__description {
            font-size: 13px;
            color: rgba(255,255,255,0.5);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .activity-item__time {
            font-size: 12px;
            color: rgba(255,255,255,0.3);
            margin-top: 4px;
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 100%;
        }
        
        .profile-card {
            display: flex;
            flex-direction: column;
            gap: 15px;
            cursor: pointer;
        }
        
        .profile-card__header {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .profile-card__avatar {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .profile-card__info {
            flex: 1;
            min-width: 0;
        }
        
        .profile-card__name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .profile-card__details {
            font-size: 13px;
            color: rgba(255,255,255,0.5);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .profile-card__data {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .profile-card__data-item {
            padding: 10px;
            background: rgba(255,255,255,0.02);
            border-radius: 10px;
        }
        
        .profile-card__data-label {
            font-size: 12px;
            color: rgba(255,255,255,0.4);
            margin-bottom: 4px;
        }
        
        .profile-card__data-value {
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 23, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 15px;
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal__content {
            width: 100%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            background: var(--panel);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
            position: relative;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.3s ease;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.1) transparent;
        }
        
        .modal__content::-webkit-scrollbar {
            width: 6px;
        }
        
        .modal__content::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .modal__content::-webkit-scrollbar-thumb {
            background-color: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .modal.active .modal__content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .modal__close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255,255,255,0.05);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .modal__close:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .modal__header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: relative;
        }
        
        .modal__title {
            font-size: 20px;
            font-weight: 700;
        }
        
        .modal__subtitle {
            font-size: 14px;
            color: rgba(255,255,255,0.5);
            margin-top: 4px;
        }
        
        .modal__body {
            padding: 20px;
        }
        
        .modal__footer {
            padding: 15px 20px;
            border-top: 1px solid rgba(255,255,255,0.05);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .profile-details {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .profile-sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .profile-main {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .profile-image {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 60px;
            font-weight: 700;
            color: white;
            position: relative;
            overflow: hidden;
            margin: 0 auto;
        }
        
        .profile-image::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(0, 243, 255, 0.2), rgba(153, 51, 255, 0.2));
            mix-blend-mode: overlay;
        }
        
        .profile-summary {
            background: rgba(255,255,255,0.02);
            border-radius: 15px;
            padding: 15px;
        }
        
        .profile-summary__item {
            display: flex;
            flex-direction: column;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .profile-summary__item:last-child {
            border-bottom: none;
        }
        
        .profile-summary__label {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 4px;
        }
        
        .profile-summary__value {
            font-size: 14px;
            font-weight: 600;
            word-break: break-word;
        }
        
        .connection-map {
            width: 100%;
            height: 250px;
            background: rgba(255,255,255,0.02);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .tab-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        .tabs::-webkit-scrollbar {
            display: none;
        }
        
        .tab {
            padding: 12px 15px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            white-space: nowrap;
        }
        
        .tab.active {
            color: var(--primary);
        }
        
        .tab.active::after {
            content: "";
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 3px 3px 0 0;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .timeline {
            position: relative;
            padding-left: 25px;
        }
        
        .timeline::before {
            content: "";
            position: absolute;
            top: 0;
            left: 8px;
            width: 2px;
            height: 100%;
            background: rgba(255,255,255,0.05);
        }
        
        .timeline-item {
            position: relative;
            padding-bottom: 20px;
        }
        
        .timeline-item:last-child {
            padding-bottom: 0;
        }
        
        .timeline-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: -25px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--panel);
            border: 2px solid var(--primary);
            z-index: 1;
        }
        
        .timeline-item__date {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 8px;
        }
        
        .timeline-item__title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .timeline-item__description {
            font-size: 13px;
            color: rgba(255,255,255,0.7);
        }
        
        .badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            background: rgba(255,255,255,0.05);
        }
        
        .badge--blue {
            background: rgba(0, 243, 255, 0.1);
            color: var(--primary);
        }
        
        .badge--purple {
            background: rgba(153, 51, 255, 0.1);
            color: var(--secondary);
        }
        
        .badge--green {
            background: rgba(0, 255, 136, 0.1);
            color: var(--success);
        }
        
        .badge--yellow {
            background: rgba(255, 204, 0, 0.1);
            color: var(--warning);
        }
        
        .badge--red {
            background: rgba(255, 51, 102, 0.1);
            color: var(--danger);
        }
        
        .network-graph {
            width: 100%;
            height: 300px;
            background: rgba(255,255,255,0.02);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }
        
        #network-canvas {
            width: 100%;
            height: 100%;
        }
        
        .floating-card {
            position: absolute;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.05);
            padding: 15px;
            max-width: 280px;
            display: none;
            z-index: 5;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .floating-card__title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .floating-card__item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 12px;
        }
        
        .floating-card__item:last-child {
            border-bottom: none;
        }
        
        .floating-card__label {
            color: rgba(255,255,255,0.5);
        }
        
        .loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 23, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .loading.active {
            opacity: 1;
            visibility: visible;
        }
        
        .loading__spinner {
            width: 36px;
            height: 36px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s infinite linear;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.05);
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            width: calc(100% - 30px);
            max-width: 400px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .notification.active {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        .notification__icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .notification__content {
            flex: 1;
            min-width: 0;
        }
        
        .notification__title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .notification__message {
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .notification__close {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
            color: rgba(255,255,255,0.5);
        }
        
        /* Login Screen */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--background);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 15px;
        }
        
        .login-box {
            width: 100%;
            max-width: 360px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .login-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .login-logo__icon {
            width: 70px;
            height: 70px;
            border: 3px solid var(--primary);
            border-radius: 50%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: pulse 2s infinite;
        }
        
        .login-logo__icon::before {
            content: "";
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid var(--secondary);
            border-radius: 50%;
            animation: pulse2 2s infinite 0.3s;
        }
        
        .login-logo__icon::after {
            content: "MK";
            font-size: 18px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
        }
        
        .login-logo__text {
            font-size: 22px;
            font-weight: 700;
            text-align: center;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .login-logo__subtitle {
            font-size: 13px;
            color: rgba(255,255,255,0.5);
            text-align: center;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-group label {
            font-size: 14px;
            color: rgba(255,255,255,0.7);
            font-weight: 600;
        }
        
        .form-control {
            padding: 12px 15px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: var(--text);
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 243, 255, 0.2);
        }

        /* Melhorando a visibilidade de input de senha */
        input[type="password"] {
            color: white;
            letter-spacing: 2px;
            font-weight: bold;
        }
        
        .login-btn {
            padding: 14px 20px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 243, 255, 0.3);
        }
        
        .login-error {
            color: var(--danger);
            font-size: 14px;
            text-align: center;
            margin-top: 10px;
            display: none;
        }
        
        /* Settings Modal */
        .settings-section {
            margin-bottom: 25px;
        }
        
        .settings-section__title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--primary);
        }
        
        .settings-group {
            background: rgba(255,255,255,0.02);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .settings-item:last-child {
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .settings-item__label {
            font-size: 14px;
            font-weight: 600;
        }
        
        .settings-item__description {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
            margin-top: 4px;
        }
        
        .toggle {
            position: relative;
            width: 46px;
            height: 24px;
            flex-shrink: 0;
        }
        
        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255,255,255,0.1);
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(22px);
        }
        
        .settings-dropdown {
            position: relative;
            width: 150px;
            flex-shrink: 0;
        }
        
        .settings-dropdown select {
            width: 100%;
            padding: 8px 10px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: var(--text);
            font-size: 13px;
            appearance: none;
            cursor: pointer;
        }
        
        .settings-dropdown:after {
            content: "‚ñº";
            font-size: 10px;
            color: rgba(255,255,255,0.5);
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }
        
        /* Adicionado para o bot√£o de sala */
        .classroom-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            display: inline-block;
            margin-top: 15px;
            margin-bottom: 10px;
        }

        .classroom-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 243, 255, 0.3);
        }
        
        /* Mobile Menu */
        .mobile-menu-toggle {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .mobile-menu-toggle span {
            display: block;
            width: 18px;
            height: 2px;
            background: var(--text);
            position: relative;
            transition: all 0.3s ease;
        }
        
        .mobile-menu-toggle span:before,
        .mobile-menu-toggle span:after {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--text);
            transition: all 0.3s ease;
        }
        
        .mobile-menu-toggle span:before {
            top: -6px;
        }
        
        .mobile-menu-toggle span:after {
            bottom: -6px;
        }
        
        .mobile-menu-toggle.active span {
            background: transparent;
        }
        
        .mobile-menu-toggle.active span:before {
            top: 0;
            transform: rotate(45deg);
        }
        
        .mobile-menu-toggle.active span:after {
            bottom: 0;
            transform: rotate(-45deg);
        }
        
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 199;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Responsive styles - these were overhauled */
        @media (min-width: 576px) {
            header {
                padding: 15px 20px;
            }
            
            .logo__icon {
                width: 40px;
                height: 40px;
            }
            
            .logo__text {
                font-size: 22px;
            }
            
            .user__name {
                display: block;
            }
            
            .container {
                padding: 20px;
            }
            
            .card {
                padding: 20px;
            }
            
            .profile-image {
                width: 150px;
                height: 150px;
                font-size: 70px;
            }
            
            .profile-summary__item {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .profile-summary__label {
                margin-bottom: 0;
            }
            
            .login-box {
                padding: 30px;
            }
        }
        
        @media (min-width: 768px) {
            .container {
                padding: 25px;
            }
            
            .page-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .card__title {
                font-size: 18px;
            }
            
            .dashboard {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .card--lg {
                grid-column: span 2;
            }
            
            .stat-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .grid-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .profile-details {
                grid-template-columns: 250px 1fr;
            }
            
            .modal__header {
                padding: 25px;
            }
            
            .modal__body {
                padding: 25px;
            }
            
            .data-table {
                min-width: 0;
            }
            
            .notification {
                width: auto;
                max-width: 350px;
                right: 20px;
                left: auto;
                transform: translateX(0) translateY(100px);
            }
            
            .notification.active {
                transform: translateX(0) translateY(0);
            }
        }
        
        @media (min-width: 992px) {
            .container {
                grid-template-columns: 260px 1fr;
                gap: 25px;
                padding: 30px;
            }
            
            .sidebar {
                position: sticky;
                top: 100px;
                left: auto;
                padding: 25px;
                overflow-y: visible;
            }
            
            .mobile-menu-toggle {
                display: none;
            }
            
            .dashboard {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .card--lg {
                grid-column: span 3;
            }
            
            .card--md {
                grid-column: span 2;
            }
            
            .grid-container {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .connection-map {
                height: 300px;
            }
            
            .chart-container {
                height: 300px;
            }
        }
        
        @media (min-width: 1200px) {
            .container {
                padding: 40px;
                gap: 30px;
            }
            
            .sidebar {
                padding: 30px;
            }
            
            .profile-details {
                grid-template-columns: 300px 1fr;
                gap: 30px;
            }
            
            .grid-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* Icons (Font Awesome style) */
        .fa {
            font-family: sans-serif;
        }
        
        .fa-search::before {
            content: "üîç";
        }
        
        .fa-dashboard::before {
            content: "üìä";
        }
        
        .fa-users::before {
            content: "üë•";
        }
        
        .fa-classroom::before {
            content: "üè´";
        }
        
        .fa-network::before {
            content: "üåê";
        }
        
        .fa-map::before {
            content: "üó∫Ô∏è";
        }
        
        .fa-file::before {
            content: "üìÑ";
        }
        
        .fa-bell::before {
            content: "üîî";
        }
        
        .fa-settings::before {
            content: "‚öôÔ∏è";
        }
        
        .fa-logout::before {
            content: "üö™";
        }
        
        .fa-plus::before {
            content: "‚ûï";
        }
        
        .fa-filter::before {
            content: "üîç";
        }
        
        .fa-user::before {
            content: "üë§";
        }
        
        .fa-calendar::before {
            content: "üìÖ";
        }
        
        .fa-location::before {
            content: "üìç";
        }
        
        .fa-id::before {
            content: "ü™™";
        }
        
        .fa-dots::before {
            content: "‚ãÆ";
        }
        
        .fa-edit::before {
            content: "‚úèÔ∏è";
        }
        
        .fa-trash::before {
            content: "üóëÔ∏è";
        }
        
        .fa-close::before {
            content: "‚úñ";
        }
        
        .fa-check::before {
            content: "‚úì";
        }
        
        .fa-warning::before {
            content: "‚ö†Ô∏è";
        }
        
        .fa-info::before {
            content: "‚ÑπÔ∏è";
        }
        
        .fa-link::before {
            content: "üîó";
        }
        
        .fa-scan::before {
            content: "üîç";
        }
        
        .fa-database::before {
            content: "üóÑÔ∏è";
        }
        
        .fa-chart::before {
            content: "üìà";
        }
        
        .fa-lock::before {
            content: "üîí";
        }
        
        .fa-unlock::before {
            content: "üîì";
        }
        
        .fa-shield::before {
            content: "üõ°Ô∏è";
        }
        
        .fa-notification::before {
            content: "üîî";
        }
    </style>
</head>
<body>
    <canvas id="background-canvas"></canvas>
    
    <!-- Preloader -->
    <div class="preloader">
        <div class="preloader__logo"></div>
        <div class="preloader__progress">
            <div class="preloader__bar" id="preloader-bar"></div>
        </div>
        <div class="preloader__text">Carregando sistema OSINT...</div>
    </div>
    
    <!-- Login Screen -->
    <div class="login-screen" id="login-screen">
        <div class="login-box">
            <div class="login-logo">
                <div class="login-logo__icon"></div>
                <div>
                    <div class="login-logo__text">MK-OSINT</div>
                    <div class="login-logo__subtitle">Sistema Avan√ßado de OSINT</div>
                </div>
            </div>
            <div class="login-form">
                <div class="form-group">
                    <label for="access-code">C√≥digo de Acesso</label>
                    <input type="password" id="access-code" class="form-control" placeholder="Digite o c√≥digo de acesso">
                </div>
                <button id="login-btn" class="login-btn">Acessar Sistema</button>
                <div id="login-error" class="login-error">C√≥digo de acesso inv√°lido. Tente novamente.</div>
            </div>
        </div>
    </div>
    
    <!-- Header -->
    <header>
        <div class="mobile-menu-toggle" id="mobile-menu-toggle">
            <span></span>
        </div>
        
        <div class="logo">
            <div class="logo__icon"></div>
            <div class="logo__text">MK-OSINT <span>v2.8.3</span></div>
        </div>
        
        <nav>
            <a href="#" class="nav__item active" data-section="dashboard">Dashboard</a>
            <a href="#" class="nav__item" data-section="profiles">Perfis</a>
            <a href="#" class="nav__item" data-section="classrooms">Salas</a>
            <a href="#" class="nav__item" data-section="analysis">An√°lise</a>
            <a href="#" class="nav__item" data-section="reports">Relat√≥rios</a>
            <div class="nav__item" id="notifications-btn">
                <i class="fa fa-bell"></i>
            </div>
        </nav>
        
        <div class="user" id="user-menu">
            <div class="user__avatar">B</div>
            <div class="user__name">Bloqueado</div>
        </div>
    </header>
    
    <!-- Sidebar Overlay (Mobile) -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="search">
                <i class="fa fa-search search__icon"></i>
                <input type="text" class="search__input" id="search-input" placeholder="Buscar...">
            </div>
            
            <div class="menu">
                <div class="menu__title">Principal</div>
                <div class="menu__list">
                    <a href="#" class="menu__item active" data-section="dashboard">
                        <i class="fa fa-dashboard menu__icon"></i>
                        Dashboard
                    </a>
                    <a href="#" class="menu__item" data-section="profiles">
                        <i class="fa fa-users menu__icon"></i>
                        Perfis
                    </a>
                    <a href="#" class="menu__item" data-section="classrooms">
                        <i class="fa fa-classroom menu__icon"></i>
                        Salas
                    </a>
                    <a href="#" class="menu__item" data-section="connections">
                        <i class="fa fa-network menu__icon"></i>
                        Conex√µes
                    </a>
                    <a href="#" class="menu__item" data-section="geolocation">
                        <i class="fa fa-map menu__icon"></i>
                        Geolocaliza√ß√£o
                    </a>
                    <a href="#" class="menu__item" data-section="documents">
                        <i class="fa fa-file menu__icon"></i>
                        Documentos
                    </a>
                </div>
            </div>
            
            <div class="menu">
                <div class="menu__title">Sistema</div>
                <div class="menu__list">
                    <a href="#" class="menu__item" id="settings-btn">
                        <i class="fa fa-settings menu__icon"></i>
                        Configura√ß√µes
                    </a>
                    <a href="#" class="menu__item" id="logout-btn">
                        <i class="fa fa-logout menu__icon"></i>
                        Sair
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="page-header">
                <div>
                    <h1 class="page-title">Dashboard</h1>
                    <div class="page-subtitle">Vis√£o geral da base de dados</div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn--outline" id="filter-btn">
                        <i class="fa fa-filter btn__icon"></i>
                        Filtrar
                    </button>
                    <button class="btn btn--primary" id="scan-btn">
                        <i class="fa fa-scan btn__icon"></i>
                        Nova An√°lise
                    </button>
                </div>
            </div>
            
            <!-- Dashboard Content -->
            <div class="dashboard" id="dashboard-content">
                <div class="card">
                    <div class="card__header">
                        <div>
                            <div class="card__title">Estat√≠sticas</div>
                            <div class="card__subtitle">Vis√£o geral da base de dados</div>
                        </div>
                    </div>
                    <div class="card__content">
                        <div class="stat-grid">
                            <div class="stat">
                                <div class="stat__value" id="total-profiles">
                                    <div class="stat__icon stat__icon--blue">
                                        <i class="fa fa-users"></i>
                                    </div>
                                    27
                                </div>
                                <div class="stat__label">Total de Perfis</div>
                            </div>
                            <div class="stat">
                                <div class="stat__value">
                                    <div class="stat__icon stat__icon--purple">
                                        <i class="fa fa-link"></i>
                                    </div>
                                    43
                                </div>
                                <div class="stat__label">Conex√µes</div>
                            </div>
                            <div class="stat">
                                <div class="stat__value">
                                    <div class="stat__icon stat__icon--green">
                                        <i class="fa fa-id"></i>
                                    </div>
                                    25
                                </div>
                                <div class="stat__label">CPFs Verificados</div>
                            </div>
                            <div class="stat">
                                <div class="stat__value">
                                    <div class="stat__icon stat__icon--yellow">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                    14
                                </div>
                                <div class="stat__label">√öltimos 30 dias</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card card--md">
                    <div class="card__header">
                        <div>
                            <div class="card__title">Distribui√ß√£o por Idade</div>
                            <div class="card__subtitle">Baseado nas datas de nascimento</div>
                        </div>
                        <div class="card__menu" id="age-chart-menu">
                            <i class="fa fa-dots"></i>
                        </div>
                    </div>
                    <div class="card__content">
                        <div class="chart-container">
                            <canvas id="age-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card__header">
                        <div>
                            <div class="card__title">Atividade Recente</div>
                            <div class="card__subtitle">√öltimas atualiza√ß√µes</div>
                        </div>
                        <div class="card__menu" id="activity-menu">
                            <i class="fa fa-dots"></i>
                        </div>
                    </div>
                    <div class="card__content">
                        <div class="activity-feed">
                            <div class="activity-item">
                                <div class="activity-item__icon" style="background:rgba(0, 243, 255, 0.1); color:var(--primary)">
                                    <i class="fa fa-user"></i>
                                </div>
                                <div class="activity-item__content">
                                    <div class="activity-item__title">Novo perfil adicionado</div>
                                    <div class="activity-item__description">Sarah Pereira Bento foi adicionada ao sistema</div>
                                    <div class="activity-item__time">Hoje, 14:35</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-item__icon" style="background:rgba(153, 51, 255, 0.1); color:var(--secondary)">
                                    <i class="fa fa-link"></i>
                                </div>
                                <div class="activity-item__content">
                                    <div class="activity-item__title">Conex√£o descoberta</div>
                                    <div class="activity-item__description">Nova conex√£o entre Lucas Santiago Mateini e J√∫lia Santiago Mateini</div>
                                    <div class="activity-item__time">Hoje, 11:23</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-item__icon" style="background:rgba(0, 255, 136, 0.1); color:var(--success)">
                                    <i class="fa fa-check"></i>
                                </div>
                                <div class="activity-item__content">
                                    <div class="activity-item__title">Verifica√ß√£o conclu√≠da</div>
                                    <div class="activity-item__description">CPF de Raphael Cittadino Andrade verificado</div>
                                    <div class="activity-item__time">Ontem, 16:42</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card card--lg">
                    <div class="card__header">
                        <div>
                            <div class="card__title">Perfis Cadastrados</div>
                            <div class="card__subtitle">Lista completa de indiv√≠duos</div>
                        </div>
                        <div class="card__menu" id="profiles-table-menu">
                            <i class="fa fa-dots"></i>
                        </div>
                    </div>
                    <div class="card__content">
                        <button id="classroom-btn" class="classroom-btn">Mostrar Perfis 1TDCPH</button>
                        <div class="table-container">
                            <table class="data-table" id="profiles-table">
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>RM</th>
                                        <th>Nascimento</th>
                                        <th>CPF</th>
                                        <th>Senha</th>
                                        <th>M√£e</th>
                                        <th>Status</th>
                                        <th>A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Preenchido dinamicamente via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="card card--lg">
                    <div class="card__header">
                        <div>
                            <div class="card__title">Mapa de Conex√µes</div>
                            <div class="card__subtitle">Visualiza√ß√£o de relacionamentos</div>
                        </div>
                        <div class="card__menu" id="network-menu">
                            <i class="fa fa-dots"></i>
                        </div>
                    </div>
                    <div class="card__content">
                        <div class="network-graph">
                            <canvas id="network-canvas"></canvas>
                            <div class="loading" id="network-loading">
                                <div class="loading__spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div class="modal" id="profile-modal">
        <div class="modal__content">
            <div class="modal__close" id="profile-modal-close">
                <i class="fa fa-close"></i>
            </div>
            <div class="modal__header">
                <h2 class="modal__title">Detalhes do Perfil</h2>
                <div class="modal__subtitle">Informa√ß√µes completas</div>
            </div>
            <div class="modal__body">
                <div class="profile-details">
                    <div class="profile-sidebar">
                        <div class="profile-image" id="profile-image">A</div>
                        <div class="profile-summary">
                            <div class="profile-summary__item">
                                <div class="profile-summary__label">Nome</div>
                                <div class="profile-summary__value" id="profile-name">Aquiles Fonseca de Almeida</div>
                            </div>
                            <div class="profile-summary__item">
                                <div class="profile-summary__label">RM</div>
                                <div class="profile-summary__value" id="profile-rm">564289</div>
                            </div>
                            <div class="profile-summary__item">
                                <div class="profile-summary__label">Nascimento</div>
                                <div class="profile-summary__value" id="profile-birth">07/11/2005</div>
                            </div>
                            <div class="profile-summary__item">
                                <div class="profile-summary__label">CPF</div>
                                <div class="profile-summary__value" id="profile-cpf">403.965.388-27</div>
                            </div>
                            <div class="profile-summary__item">
                                <div class="profile-summary__label">Senha</div>
                                <div class="profile-summary__value" id="profile-password"></div>
                            </div>
                            <div class="profile-summary__item">
                                <div class="profile-summary__label">M√£e</div>
                                <div class="profile-summary__value" id="profile-mother">Patricia Fonseca de Almeida</div>
                            </div>
                            <div class="profile-summary__item">
                                <div class="profile-summary__label">Status</div>
                                <div class="profile-summary__value" id="profile-status">
                                    <span class="data-table__status data-table__status--active">Verificado</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-main">
                        <div class="tab-container">
                            <div class="tabs">
                                <div class="tab active" data-tab="connections">Conex√µes</div>
                                <div class="tab" data-tab="timeline">Hist√≥rico</div>
                                <div class="tab" data-tab="documents">Documentos</div>
                                <div class="tab" data-tab="locations">Localiza√ß√µes</div>
                            </div>
                            <div class="tab-content active" id="connections-tab">
                                <div class="connection-map">
                                    <canvas id="connection-canvas"></canvas>
                                </div>
                                <div style="margin-top: 15px">
                                    <div class="badges">
                                        <div class="badge badge--blue">Fam√≠lia</div>
                                        <div class="badge badge--purple">Escola</div>
                                        <div class="badge badge--green">Amigos</div>
                                    </div>
                                </div>
                                <div style="margin-top: 15px">
                                    <h3 style="margin-bottom: 12px; font-size: 16px; font-weight: 600;">Conex√µes Diretas</h3>
                                    <div class="table-container">
                                        <table class="data-table">
                                            <thead>
                                                <tr>
                                                    <th>Nome</th>
                                                    <th>Tipo</th>
                                                    <th>Confiabilidade</th>
                                                    <th>√öltima Verifica√ß√£o</th>
                                                </tr>
                                            </thead>
                                            <tbody id="connections-table">
                                                <!-- Preenchido dinamicamente via JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-content" id="timeline-tab">
                                <div class="timeline">
                                    <div class="timeline-item">
                                        <div class="timeline-item__date">03/06/2025</div>
                                        <div class="timeline-item__title">Perfil atualizado</div>
                                        <div class="timeline-item__description">Informa√ß√µes de contato atualizadas</div>
                                    </div>
                                    <div class="timeline-item">
                                        <div class="timeline-item__date">15/05/2025</div>
                                        <div class="timeline-item__title">Conex√£o descoberta</div>
                                        <div class="timeline-item__description">Nova conex√£o com Gabriel Pereira Catini</div>
                                    </div>
                                    <div class="timeline-item">
                                        <div class="timeline-item__date">10/05/2025</div>
                                        <div class="timeline-item__title">Perfil criado</div>
                                        <div class="timeline-item__description">Perfil adicionado ao sistema</div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-content" id="documents-tab">
                                <div style="text-align: center; padding: 30px 0; color: rgba(255,255,255,0.5);">
                                    Nenhum documento dispon√≠vel para este perfil.
                                </div>
                            </div>
                            <div class="tab-content" id="locations-tab">
                                <div style="text-align: center; padding: 30px 0; color: rgba(255,255,255,0.5);">
                                    Nenhuma localiza√ß√£o registrada para este perfil.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
        <div class="modal__content">
            <div class="modal__close" id="settings-modal-close">
                <i class="fa fa-close"></i>
            </div>
            <div class="modal__header">
                <h2 class="modal__title">Configura√ß√µes do Sistema</h2>
                <div class="modal__subtitle">Personalize o MK-OSINT</div>
            </div>
            <div class="modal__body">
                <div class="settings-section">
                    <h3 class="settings-section__title">Configura√ß√µes Gerais</h3>
                    <div class="settings-group">
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Modo Escuro</div>
                                <div class="settings-item__description">Alternar entre tema claro e escuro</div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="dark-mode-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Notifica√ß√µes</div>
                                <div class="settings-item__description">Receber alertas de sistema</div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="notifications-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Anima√ß√µes</div>
                                <div class="settings-item__description">Habilitar anima√ß√µes da interface</div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="animations-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 class="settings-section__title">Seguran√ßa</h3>
                    <div class="settings-group">
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">N√≠vel de Seguran√ßa</div>
                                <div class="settings-item__description">Controle de acesso ao sistema</div>
                            </div>
                            <div class="settings-dropdown">
                                <select id="security-level">
                                    <option value="low">B√°sico</option>
                                    <option value="medium" selected>Padr√£o</option>
                                    <option value="high">Avan√ßado</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Bloqueio Autom√°tico</div>
                                <div class="settings-item__description">Bloquear ap√≥s per√≠odo de inatividade</div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="auto-lock-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Tempo de Bloqueio</div>
                                <div class="settings-item__description">Tempo at√© bloqueio autom√°tico</div>
                            </div>
                            <div class="settings-dropdown">
                                <select id="lock-timeout">
                                    <option value="5">5 minutos</option>
                                    <option value="10" selected>10 minutos</option>
                                    <option value="30">30 minutos</option>
                                    <option value="60">1 hora</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 class="settings-section__title">OSINT</h3>
                    <div class="settings-group">
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Fontes de Dados</div>
                                <div class="settings-item__description">Escolha quais fontes utilizar</div>
                            </div>
                            <div class="settings-dropdown">
                                <select id="data-sources">
                                    <option value="all" selected>Todas</option>
                                    <option value="social">Redes Sociais</option>
                                    <option value="public">Registros P√∫blicos</option>
                                    <option value="custom">Personalizado</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Profundidade de Busca</div>
                                <div class="settings-item__description">N√≠vel de profundidade das buscas</div>
                            </div>
                            <div class="settings-dropdown">
                                <select id="search-depth">
                                    <option value="basic">B√°sica</option>
                                    <option value="standard" selected>Padr√£o</option>
                                    <option value="advanced">Avan√ßada</option>
                                    <option value="deep">Profunda</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Modo An√¥nimo</div>
                                <div class="settings-item__description">Realizar buscas de forma an√¥nima</div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="anonymous-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline" id="reset-settings">Restaurar Padr√£o</button>
                <button class="btn btn--primary" id="save-settings">Salvar Configura√ß√µes</button>
            </div>
        </div>
    </div>
    
    <!-- Filter Modal -->
    <div class="modal" id="filter-modal">
        <div class="modal__content">
            <div class="modal__close" id="filter-modal-close">
                <i class="fa fa-close"></i>
            </div>
            <div class="modal__header">
                <h2 class="modal__title">Filtrar Resultados</h2>
                <div class="modal__subtitle">Refine a exibi√ß√£o dos dados</div>
            </div>
            <div class="modal__body">
                <div class="settings-section">
                    <h3 class="settings-section__title">Filtros</h3>
                    <div class="settings-group">
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Status</div>
                                <div class="settings-item__description">Filtrar por status do perfil</div>
                            </div>
                            <div class="settings-dropdown">
                                <select id="status-filter">
                                    <option value="all" selected>Todos</option>
                                    <option value="active">Verificados</option>
                                    <option value="pending">Pendentes</option>
                                    <option value="inactive">Inativos</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">G√™nero</div>
                                <div class="settings-item__description">Filtrar por g√™nero</div>
                            </div>
                            <div class="settings-dropdown">
                                <select id="gender-filter">
                                    <option value="all" selected>Todos</option>
                                    <option value="M">Masculino</option>
                                    <option value="F">Feminino</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div>
                                <div class="settings-item__label">Idade</div>
                                <div class="settings-item__description">Filtrar por faixa et√°ria</div>
                            </div>
                            <div class="settings-dropdown">
                                <select id="age-filter">
                                    <option value="all" selected>Todos</option>
                                    <option value="18-19">18-19 anos</option>
                                    <option value="20-21">20-21 anos</option>
                                    <option value="22-23">22-23 anos</option>
                                    <option value="24+">24+ anos</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline" id="clear-filters">Limpar Filtros</button>
                <button class="btn btn--primary" id="apply-filters">Aplicar Filtros</button>
            </div>
        </div>
    </div>
    
    <!-- New Analysis Modal -->
    <div class="modal" id="analysis-modal">
        <div class="modal__content">
            <div class="modal__close" id="analysis-modal-close">
                <i class="fa fa-close"></i>
            </div>
            <div class="modal__header">
                <h2 class="modal__title">Nova An√°lise OSINT</h2>
                <div class="modal__subtitle">Colete informa√ß√µes de fontes abertas</div>
            </div>
            <div class="modal__body">
                <div class="settings-section">
                    <h3 class="settings-section__title">Informa√ß√µes de Entrada</h3>
                    <div class="settings-group">
                        <div class="form-group">
                            <label for="analysis-name">Nome Completo</label>
                            <input type="text" id="analysis-name" class="form-control" placeholder="Ex: Jo√£o Silva">
                        </div>
                        <div class="form-group">
                            <label for="analysis-doc">CPF/Documento</label>
                            <input type="text" id="analysis-doc" class="form-control" placeholder="Ex: 123.456.789-00">
                        </div>
                        <div class="form-group">
                            <label for="analysis-options">Op√ß√µes de Busca</label>
                            <div class="settings-group" style="padding: 10px;">
                                <div class="settings-item">
                                    <div class="settings-item__label">Redes Sociais</div>
                                    <label class="toggle">
                                        <input type="checkbox" id="social-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="settings-item">
                                    <div class="settings-item__label">Registros P√∫blicos</div>
                                    <label class="toggle">
                                        <input type="checkbox" id="public-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="settings-item">
                                    <div class="settings-item__label">Geolocaliza√ß√£o</div>
                                    <label class="toggle">
                                        <input type="checkbox" id="geo-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="settings-item">
                                    <div class="settings-item__label">Conex√µes</div>
                                    <label class="toggle">
                                        <input type="checkbox" id="connections-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline" id="cancel-analysis">Cancelar</button>
                <button class="btn btn--primary" id="start-analysis">Iniciar An√°lise</button>
            </div>
        </div>
    </div>
    
    <!-- Notification Popup -->
    <div class="notification" id="notification">
        <div class="notification__icon" style="background:rgba(0, 243, 255, 0.1); color:var(--primary)">
            <i class="fa fa-info"></i>
        </div>
        <div class="notification__content">
            <div class="notification__title">An√°lise iniciada</div>
            <div class="notification__message">Coletando informa√ß√µes de fontes abertas...</div>
        </div>
        <div class="notification__close" id="notification-close">
            <i class="fa fa-close"></i>
        </div>
    </div>
    
    <!-- Floating Node Info Card -->
    <div class="floating-card" id="node-info">
        <div class="floating-card__title">
            <i class="fa fa-user" style="color: var(--primary)"></i>
            <span id="node-name">Nome do Perfil</span>
        </div>
        <div class="floating-card__item">
            <div class="floating-card__label">RM</div>
            <div id="node-rm">000000</div>
        </div>
        <div class="floating-card__item">
            <div class="floating-card__label">CPF</div>
            <div id="node-cpf">000.000.000-00</div>
        </div>
        <div class="floating-card__item">
            <div class="floating-card__label">Nascimento</div>
            <div id="node-birth">00/00/0000</div>
        </div>
        <div class="floating-card__item">
            <div class="floating-card__label">Conex√µes</div>
            <div id="node-connections">0</div>
        </div>
    </div>
    
    <script>
        
        const profiles = [
    {
        id: 1,
        name: "Aquiles Fonseca de Almeida",
        rm: "564289",
        birth: "07/11/2005",
        cpf: "403.965.388-27",
        gender: "M",
        mother: "Patricia Fonseca de Almeida",
        status: "active",
        classroom: "1TDCPH",
        password: "071105"
    },
    {
        id: 2,
        name: "Carlos Alberto Oliveira Nascimento",
        rm: "565694",
        birth: "21/10/2004",
        cpf: "423.988.598-19",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "211004"
    },
    {
        id: 3,
        name: "Cau√£ Massi Gallo de Oliveira",
        rm: "564741",
        birth: "24/11/2006",
        cpf: "456.911.848-81",
        gender: "M",
        mother: "Thais Massi Gallo",
        status: "active",
        classroom: "1TDCPH",
        password: "241106"
    },
    {
        id: 4,
        name: "Eduardo Jos√© Araujo dos Santos",
        rm: "564584",
        birth: "07/12/2006",
        cpf: "4719.500.38-25",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "071206"
    },
    {
        id: 5,
        name: "Enzo Marques Mizuguchi",
        rm: "563302",
        birth: "28/01/2007",
        cpf: "492.183.588-80",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "280107"
    },
    {
        id: 6,
        name: "Erick Willian Miguel",
        rm: "564896",
        birth: "15/02/1984",
        cpf: "324.458.838-73",
        gender: "M",
        mother: "REGINA ROMANA MIGUEL",
        status: "active",
        classroom: "1TDCPH",
        password: "150284"
    },
    {
        id: 7,
        name: "Gabriel Pereira Catini",
        rm: "563079",
        birth: "16/05/2005",
        cpf: "381.674.128-22",
        gender: "M",
        mother: "Lurdes da Penha Pereira Catini",
        status: "active",
        classroom: "1TDCPH",
        password: "160505"
    },
    {
        id: 8,
        name: "Guilherme Augusto Miranda",
        rm: "565207",
        birth: "21/10/2006",
        cpf: "424.397.748-80",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "211006"
    },
    {
        id: 9,
        name: "Guilherme Nascimento",
        rm: "562887",
        birth: "06/10/2004",
        cpf: "528.857.228-35",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "061004"
    },
    {
        id: 10,
        name: "Henrique Pereira Duarte",
        rm: "561800",
        birth: "27/04/2007",
        cpf: "553.668.928-21",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "270407"
    },
    {
        id: 11,
        name: "Jonathas de Souza dos Santos",
        rm: "562431",
        birth: "22/01/2007",
        cpf: "506.426.198-59",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "220107"
    },
    {
        id: 12,
        name: "J√∫lia Santiago Mateini",
        rm: "561315",
        birth: "29/03/2007",
        cpf: "136.329.887-90",
        gender: "F",
        mother: "Priscila Soares Santiago Mateini",
        status: "active",
        classroom: "1TDCPH",
        password: "290307",
        relationships: [
            { type: "family", to: 13, label: "Irm√£o" }
        ]
    },
    {
        id: 13,
        name: "Lucas Santiago Mateini",
        rm: "561315",
        birth: "15/08/2005",
        cpf: "136.329.887-91",
        gender: "M",
        mother: "Priscila Soares Santiago Mateini",
        status: "active",
        classroom: "1TDCPH",
        password: "150805"
    },
    {
        id: 14,
        name: "Kaique Barsi Auricchio",
        rm: "563446",
        birth: "15/12/2006",
        cpf: "398.246.558-32",
        gender: "M",
        mother: "Luciane Maria Barsi Auricchio",
        status: "active",
        classroom: "1TDCPH",
        password: "151206"
    },
    {
        id: 15,
        name: "Leandro de Souza da Silva",
        rm: "566485",
        birth: "30/06/2006",
        cpf: "534.322.858-50",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "300606"
    },
    {
        id: 16,
        name: "Lucas Cardoso Bernardes",
        rm: "562689",
        birth: "08/02/2002",
        cpf: "512.672.068-61",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "080202"
    },
    {
        id: 17,
        name: "Lucas Carvalho Barbosa de Sousa",
        rm: "563231",
        birth: "17/12/2002",
        cpf: "443.149.558-48",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "171202"
    },
    {
        id: 18,
        name: "Lucas Roggerio Imparato",
        rm: "554896",
        birth: "21/10/2005",
        cpf: "525.844.258-66",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "211005"
    },
    {
        id: 19,
        name: "Lucas Rossi Rodrigues",
        rm: "564375",
        birth: "14/12/2006",
        cpf: "390.132.058-01",
        gender: "M",
        mother: "Rosane Rossi Rodrigues",
        status: "active",
        classroom: "1TDCPH",
        password: "141206"
    },
    {
        id: 20,
        name: "Marco Ant√¥nio Barone Schoppan",
        rm: "94729",
        birth: "16/10/2001",
        cpf: "497.007.068-77",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "161001"
    },
    {
        id: 21,
        name: "MK procurado pelo FBI",
        rm: "500000",
        birth: "N√£o informado",
        cpf: "N√£o informado",
        gender: "M",
        mother: "N√£o informado",
        status: "inactive",
        classroom: "1TDCPH",
        password: ""
    },
    {
        id: 22,
        name: "Pedro Augusto Belo Ferreira",
        rm: "565530",
        birth: "16/09/2006",
        cpf: "438.537.328-01",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "160906"
    },
    {
        id: 23,
        name: "Raphael Cittadino Andrade",
        rm: "556902",
        birth: "13/02/2005",
        cpf: "540.006.228-89",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "130205"
    },
    {
        id: 24,
        name: "Raul Azzi Corsi",
        rm: "565112",
        birth: "24/07/2004",
        cpf: "522.418.538-60",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "240704"
    },
    {
        id: 25,
        name: "Rayron Souza Ranieri",
        rm: "563103",
        birth: "27/08/2006",
        cpf: "505.824.128-54",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "270806"
    },
    {
        id: 26,
        name: "Sarah Pereira Bento",
        rm: "562333",
        birth: "11/01/2007",
        cpf: "402.527.748-41",
        gender: "F",
        mother: "Sirlene Aparecida Pereira",
        status: "active",
        classroom: "1TDCPH",
        password: "110107"
    },
    {
        id: 27,
        name: "Vinicius Pinheiro Olivetti",
        rm: "98255",
        birth: "10/07/2003",
        cpf: "446.085.878-97",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "100703"
    },
    {
        id: 28,
        name: "Vitor Yuji Suenaga Yoshida",
        rm: "563005",
        birth: "03/07/2006",
        cpf: "446.079.228-11",
        gender: "M",
        mother: "Sem informa√ß√£o",
        status: "active",
        classroom: "1TDCPH",
        password: "030706"
    }
];

const relationships = [
    { source: 1, target: 7, type: "school" },
    { source: 1, target: 19, type: "friend" },
    { source: 2, target: 9, type: "family" },
    { source: 3, target: 5, type: "school" },
    { source: 3, target: 11, type: "friend" },
    { source: 4, target: 15, type: "school" },
    { source: 5, target: 10, type: "friend" },
    { source: 7, target: 18, type: "school" },
    { source: 8, target: 22, type: "friend" },
    { source: 9, target: 2, type: "family" },
    { source: 12, target: 13, type: "family" },
    { source: 14, target: 19, type: "school" },
    { source: 16, target: 20, type: "friend" },
    { source: 17, target: 27, type: "school" },
    { source: 19, target: 25, type: "friend" },
    { source: 23, target: 28, type: "school" },
    { source: 24, target: 27, type: "friend" },
    { source: 26, target: 12, type: "school" }
];

let showClassroom = false;

function calculateAge(birthDateStr) {
    if (!birthDateStr || birthDateStr === "N√£o informado") return null;
    
    const parts = birthDateStr.split('/');
    const birthDate = new Date(parts[2], parts[1] - 1, parts[0]);
    const today = new Date();
    
    let age = today.getFullYear() - birthDate.getFullYear();
    const monthDiff = today.getMonth() - birthDate.getMonth();
    
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    
    return age;
}

let activeFilters = {
    status: 'all',
    gender: 'all',
    age: 'all',
    search: '',
    classroom: 'all'
};

let currentProfileId = null;
let ageChart = null;
let networkGraph = null;
let connectionGraph = null;

document.addEventListener('DOMContentLoaded', function() {
    initLogin();
    initGlobalEvents();
});

function initLogin() {
    const loginScreen = document.getElementById('login-screen');
    const loginBtn = document.getElementById('login-btn');
    const accessCode = document.getElementById('access-code');
    const loginError = document.getElementById('login-error');
    
    // Exibir a senha digitada como feedback visual
    accessCode.addEventListener('input', function() {
        // Isso vai mostrar o feedback visual sem modificar o tipo do campo
        if (this.value.length > 0) {
            this.style.backgroundColor = 'rgba(255,255,255,0.1)';
        } else {
            this.style.backgroundColor = 'rgba(255,255,255,0.05)';
        }
    });
    
    accessCode.addEventListener('keyup', function(e) {
        if (e.key === 'Enter') {
            authenticate();
        }
    });
    
    loginBtn.addEventListener('click', authenticate);
    
    function authenticate() {
        const code = accessCode.value.trim();
        
        // Alerta com a senha para testes (apenas para desenvolvimento)
        if (code === '') {
            showLoginError("Digite a senha: fiaph");
            return;
        }
        
        if (code === 'fiaph') {
            loginScreen.style.opacity = '0';
            setTimeout(() => {
                loginScreen.style.display = 'none';
                initSystem();
            }, 500);
        } else {
            showLoginError("C√≥digo de acesso inv√°lido. Tente novamente.");
            accessCode.value = '';
            accessCode.focus();
        }
    }
    
    function showLoginError(message) {
        loginError.textContent = message;
        loginError.style.display = 'block';
        
        setTimeout(() => {
            loginError.style.display = 'none';
        }, 3000);
    }
}

function initGlobalEvents() {
    const notification = document.getElementById('notification');
    const notificationClose = document.getElementById('notification-close');
    
    notificationClose.addEventListener('click', function() {
        notification.classList.remove('active');
    });
    
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    
    mobileMenuToggle.addEventListener('click', function() {
        this.classList.toggle('active');
        sidebar.classList.toggle('active');
        sidebarOverlay.classList.toggle('active');
    });
    
    sidebarOverlay.addEventListener('click', function() {
        sidebar.classList.remove('active');
        sidebarOverlay.classList.remove('active');
        mobileMenuToggle.classList.remove('active');
    });
    
    const logoutBtn = document.getElementById('logout-btn');
    logoutBtn.addEventListener('click', function() {
        showNotification('Saindo do sistema', 'Voc√™ ser√° redirecionado para a tela de login', 'info');
        
        setTimeout(() => {
            document.getElementById('login-screen').style.display = 'flex';
            document.getElementById('login-screen').style.opacity = '1';
            document.getElementById('access-code').value = '';
            document.getElementById('access-code').focus();
        }, 1500);
    });
    
    const settingsBtn = document.getElementById('settings-btn');
    const settingsModal = document.getElementById('settings-modal');
    const settingsModalClose = document.getElementById('settings-modal-close');
    const saveSettingsBtn = document.getElementById('save-settings');
    const resetSettingsBtn = document.getElementById('reset-settings');
    
    settingsBtn.addEventListener('click', function() {
        settingsModal.classList.add('active');
    });
    
    settingsModalClose.addEventListener('click', function() {
        settingsModal.classList.remove('active');
    });
    
    saveSettingsBtn.addEventListener('click', function() {
        settingsModal.classList.remove('active');
        showNotification('Configura√ß√µes salvas', 'Suas prefer√™ncias foram atualizadas com sucesso', 'success');
    });
    
    resetSettingsBtn.addEventListener('click', function() {
        document.getElementById('dark-mode-toggle').checked = true;
        document.getElementById('notifications-toggle').checked = true;
        document.getElementById('animations-toggle').checked = true;
        document.getElementById('auto-lock-toggle').checked = true;
        
        document.getElementById('security-level').value = 'medium';
        document.getElementById('lock-timeout').value = '10';
        document.getElementById('data-sources').value = 'all';
        document.getElementById('search-depth').value = 'standard';
        document.getElementById('anonymous-toggle').checked = true;
        
        showNotification('Configura√ß√µes restauradas', 'As configura√ß√µes padr√£o foram restauradas', 'info');
    });
    
    const navItems = document.querySelectorAll('.nav__item[data-section]');
    const menuItems = document.querySelectorAll('.menu__item[data-section]');
    
    function navigateTo(section) {
        navItems.forEach(item => {
            if (item.getAttribute('data-section') === section) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
        
        menuItems.forEach(item => {
            if (item.getAttribute('data-section') === section) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
        
        const pageTitle = document.querySelector('.page-title');
        const pageSubtitle = document.querySelector('.page-subtitle');
        
        switch (section) {
            case 'dashboard':
                pageTitle.textContent = 'Dashboard';
                pageSubtitle.textContent = 'Vis√£o geral da base de dados';
                break;
            case 'profiles':
                pageTitle.textContent = 'Perfis';
                pageSubtitle.textContent = 'Gerenciamento de perfis cadastrados';
                break;
            case 'classrooms':
                pageTitle.textContent = 'Salas';
                pageSubtitle.textContent = 'Gerenciamento de salas e turmas';
                showClassroom = true;
                document.getElementById('classroom-btn').textContent = 'Ocultar Perfis 1TDCPH';
                applyFilters();
                break;
            case 'connections':
                pageTitle.textContent = 'Conex√µes';
                pageSubtitle.textContent = 'Visualiza√ß√£o de relacionamentos';
                break;
            case 'geolocation':
                pageTitle.textContent = 'Geolocaliza√ß√£o';
                pageSubtitle.textContent = 'Mapeamento de localiza√ß√µes';
                break;
            case 'documents':
                pageTitle.textContent = 'Documentos';
                pageSubtitle.textContent = 'Arquivos e documentos digitais';
                break;
            case 'analysis':
                pageTitle.textContent = 'An√°lise';
                pageSubtitle.textContent = 'An√°lise de dados e informa√ß√µes';
                break;
            case 'reports':
                pageTitle.textContent = 'Relat√≥rios';
                pageSubtitle.textContent = 'Gera√ß√£o de relat√≥rios';
                break;
        }
        
        showNotification('Navega√ß√£o', `Acessando ${pageTitle.textContent}`, 'info');
        
        // Em mobile, fechar o menu lateral ap√≥s navega√ß√£o
        if (window.innerWidth < 992) {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
            mobileMenuToggle.classList.remove('active');
        }
    }
    
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            navigateTo(this.getAttribute('data-section'));
        });
    });
    
    menuItems.forEach(item => {
        item.addEventListener('click', function() {
            navigateTo(this.getAttribute('data-section'));
        });
    });
    
    const notificationsBtn = document.getElementById('notifications-btn');
    
    notificationsBtn.addEventListener('click', function() {
        showNotification('Notifica√ß√µes', 'Voc√™ n√£o tem novas notifica√ß√µes', 'info');
    });
    
    const userMenu = document.getElementById('user-menu');
    
    userMenu.addEventListener('click', function() {
        showNotification('Perfil do Usu√°rio', 'Configura√ß√µes de conta do administrador', 'info');
    });
}

function initSystem() {
    const preloader = document.querySelector('.preloader');
    const preloaderBar = document.getElementById('preloader-bar');
    
    let progress = 0;
    const interval = setInterval(() => {
        progress += Math.random() * 10;
        if (progress > 100) {
            progress = 100;
            clearInterval(interval);
            
            setTimeout(() => {
                preloader.style.opacity = '0';
                setTimeout(() => {
                    preloader.style.display = 'none';
                    initBackgroundAnimation();
                    initDashboard();
                }, 500);
            }, 500);
        }
        
        preloaderBar.style.width = `${progress}%`;
    }, 200);
}

function initDashboard() {
    populateProfilesTable([]); 
    
    initCharts();
    
    initNetworkGraph();
    
    initFilters();
    
    initProfileModal();
    
    initAnalysisModal();
    
    initSearch();

    initClassroomButton();
    
    // Exibir dica sobre a senha para usu√°rios em dispositivos m√≥veis
    if (window.innerWidth <= 768) {
        showNotification('Dica de acesso', 'A senha do sistema √© "fiaph"', 'info');
    }
    
    // Verificar orienta√ß√£o para dispositivos m√≥veis
    checkOrientation();
    window.addEventListener('resize', checkOrientation);
    
    // Ajustar elementos quando a janela √© redimensionada
    window.addEventListener('resize', function() {
        if (ageChart) {
            ageChart.resize();
        }
        
        const networkCanvas = document.getElementById('network-canvas');
        if (networkCanvas) {
            const container = networkCanvas.parentElement;
            networkCanvas.width = container.offsetWidth;
            networkCanvas.height = container.offsetHeight;
        }
        
        const connectionCanvas = document.getElementById('connection-canvas');
        if (connectionCanvas) {
            const container = connectionCanvas.parentElement;
            connectionCanvas.width = container.offsetWidth;
            connectionCanvas.height = container.offsetHeight;
        }
    });
}

function checkOrientation() {
    // Se estiver em modo paisagem em dispositivos pequenos, mostrar dica
    if (window.innerWidth < window.innerHeight && window.innerWidth < 768) {
        showNotification('Dica de uso', 'Gire o dispositivo para melhor visualiza√ß√£o', 'info');
    }
}

function initClassroomButton() {
    const classroomBtn = document.getElementById('classroom-btn');
    
    classroomBtn.addEventListener('click', function() {
        showClassroom = !showClassroom;
        
        if (showClassroom) {
            const classroomProfiles = profiles.filter(p => p.classroom === '1TDCPH');
            populateProfilesTable(classroomProfiles);
            classroomBtn.textContent = 'Ocultar Perfis 1TDCPH';
            showNotification('Sala 1TDCPH', 'Exibindo perfis da sala 1TDCPH', 'info');
            
            document.getElementById('total-profiles').innerHTML = `
                <div class="stat__icon stat__icon--blue">
                    <i class="fa fa-users"></i>
                </div>
                ${classroomProfiles.length}
            `;
        } else {
            populateProfilesTable([]);
            classroomBtn.textContent = 'Mostrar Perfis 1TDCPH';
            showNotification('Sala 1TDCPH', 'Perfis ocultados', 'info');
            
            document.getElementById('total-profiles').innerHTML = `
                <div class="stat__icon stat__icon--blue">
                    <i class="fa fa-users"></i>
                </div>
                0
            `;
        }
    });
}

function initBackgroundAnimation() {
    const canvas = document.getElementById('background-canvas');
    const renderer = new THREE.WebGLRenderer({
        canvas,
        antialias: true,
        alpha: true
    });
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    
    const scene = new THREE.Scene();
    
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100);
    camera.position.set(0, 0, 15);
    scene.add(camera);
    
    const ambientLight = new THREE.AmbientLight(0x404040, 2);
    scene.add(ambientLight);
    
    const pointLight = new THREE.PointLight(0x00f3ff, 2);
    pointLight.position.set(10, 10, 10);
    scene.add(pointLight);
    
    const pointLight2 = new THREE.PointLight(0x9933ff, 2);
    pointLight2.position.set(-10, -10, -10);
    scene.add(pointLight2);
    
    // Reduzir o n√∫mero de part√≠culas em dispositivos m√≥veis
    const isMobile = window.innerWidth < 768;
    const particlesCount = isMobile ? 300 : 800;
    const positions = new Float32Array(particlesCount * 3);
    
    for(let i = 0; i < particlesCount * 3; i++) {
        positions[i] = (Math.random() - 0.5) * 50;
    }
    
    const particlesGeometry = new THREE.BufferGeometry();
    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    
    const particlesMaterial = new THREE.PointsMaterial({
        size: 0.1,
        sizeAttenuation: true,
        color: 0xffffff,
        transparent: true,
        opacity: 0.8
    });
    
    const particles = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particles);
    
    const linesGeometry = new THREE.BufferGeometry();
    const lineCount = isMobile ? 15 : 30;
    const linePositions = new Float32Array(lineCount * 6);
    const lineColors = new Float32Array(lineCount * 6);
    
    for(let i = 0; i < lineCount; i++) {
        const i6 = i * 6;
        
        linePositions[i6 + 0] = (Math.random() - 0.5) * 20;
        linePositions[i6 + 1] = (Math.random() - 0.5) * 20;
        linePositions[i6 + 2] = (Math.random() - 0.5) * 20;
        
        linePositions[i6 + 3] = (Math.random() - 0.5) * 20;
        linePositions[i6 + 4] = (Math.random() - 0.5) * 20;
        linePositions[i6 + 5] = (Math.random() - 0.5) * 20;
        
        const color1 = new THREE.Color();
        color1.setHSL(Math.random(), 0.8, 0.8);
        const color2 = new THREE.Color();
        color2.setHSL(Math.random(), 0.8, 0.8);
        
        lineColors[i6 + 0] = color1.r;
        lineColors[i6 + 1] = color1.g;
        lineColors[i6 + 2] = color1.b;
        
        lineColors[i6 + 3] = color2.r;
        lineColors[i6 + 4] = color2.g;
        lineColors[i6 + 5] = color2.b;
    }
    
    linesGeometry.setAttribute('position', new THREE.BufferAttribute(linePositions, 3));
    linesGeometry.setAttribute('color', new THREE.BufferAttribute(lineColors, 3));
    
    const linesMaterial = new THREE.LineBasicMaterial({
        vertexColors: true,
        transparent: true,
        opacity: 0.2
    });
    
    const lines = new THREE.LineSegments(linesGeometry, linesMaterial);
    scene.add(lines);
    
    const clock = new THREE.Clock();
    
    const animate = () => {
        const elapsedTime = clock.getElapsedTime();
        
        // Reduzir a velocidade de anima√ß√£o em dispositivos m√≥veis para economizar bateria
        const speed = isMobile ? 0.01 : 0.03;
        particles.rotation.y = elapsedTime * speed;
        particles.rotation.x = elapsedTime * (speed * 0.6);
        
        lines.rotation.y = elapsedTime * (speed * 0.6);
        lines.rotation.x = elapsedTime * (speed * 0.4);
        
        // Animar part√≠culas apenas em desktops para poupar recursos em dispositivos m√≥veis
        if (!isMobile) {
            const positions = particles.geometry.attributes.position.array;
            for(let i = 0; i < particlesCount; i++) {
                const i3 = i * 3;
                positions[i3 + 1] += Math.sin(elapsedTime + i) * 0.005;
            }
            particles.geometry.attributes.position.needsUpdate = true;
        }
        
        renderer.render(scene, camera);
        window.requestAnimationFrame(animate);
    };
    
    animate();
    
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
}

function initCharts() {
    const ageData = {
        labels: ['18-19', '20-21', '22-23', '24-25', '26+'],
        datasets: [{
            label: 'Distribui√ß√£o por Idade',
            data: [12, 8, 5, 1, 1],
            backgroundColor: [
                'rgba(0, 243, 255, 0.7)',
                'rgba(153, 51, 255, 0.7)',
                'rgba(0, 255, 136, 0.7)',
                'rgba(255, 204, 0, 0.7)',
                'rgba(255, 51, 102, 0.7)'
            ],
            borderColor: [
                'rgba(0, 243, 255, 1)',
                'rgba(153, 51, 255, 1)',
                'rgba(0, 255, 136, 1)',
                'rgba(255, 204, 0, 1)',
                'rgba(255, 51, 102, 1)'
            ],
            borderWidth: 1
        }]
    };
    
    const ageChartCtx = document.getElementById('age-chart');
    
    ageChart = new Chart(ageChartCtx, {
        type: 'bar',
        data: ageData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(255, 255, 255, 0.05)'
                    },
                    ticks: {
                        color: 'rgba(255, 255, 255, 0.7)'
                    }
                },
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.05)'
                    },
                    ticks: {
                        color: 'rgba(255, 255, 255, 0.7)'
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });
    
    document.getElementById('age-chart-menu').addEventListener('click', function() {
        showNotification('Op√ß√µes do Gr√°fico', 'Op√ß√µes adicionais de visualiza√ß√£o do gr√°fico', 'info');
    });
    
    document.getElementById('activity-menu').addEventListener('click', function() {
        showNotification('Op√ß√µes de Atividade', 'Filtrar ou exportar atividades recentes', 'info');
    });
    
    document.getElementById('profiles-table-menu').addEventListener('click', function() {
        showNotification('Op√ß√µes da Tabela', 'Exportar ou imprimir lista de perfis', 'info');
    });
    
    document.getElementById('network-menu').addEventListener('click', function() {
        showNotification('Op√ß√µes de Rede', 'Ajustar visualiza√ß√£o do mapa de conex√µes', 'info');
    });
}

function initNetworkGraph() {
    const canvas = document.getElementById('network-canvas');
    const ctx = canvas.getContext('2d');
    
    const canvasContainer = canvas.parentElement;
    canvas.width = canvasContainer.offsetWidth;
    canvas.height = canvasContainer.offsetHeight;
    
    const loading = document.getElementById('network-loading');
    loading.classList.add('active');
    
    setTimeout(() => {
        loading.classList.remove('active');
        
        const nodes = [];
        const selectedProfiles = profiles.filter(p => p.id <= 15 && p.classroom === '1TDCPH');
        
        selectedProfiles.forEach(profile => {
            nodes.push({
                id: profile.id,
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                radius: 15,
                color: profile.gender === 'F' ? '#ff00a5' : '#00f3ff',
                name: profile.name,
                rm: profile.rm,
                cpf: profile.cpf,
                birth: profile.birth,
                connections: relationships.filter(r => r.source === profile.id || r.target === profile.id).length
            });
        });
        
        const edges = [];
        
        relationships.forEach(rel => {
            const sourceNode = nodes.find(n => n.id === rel.source);
            const targetNode = nodes.find(n => n.id === rel.target);
            
            if (sourceNode && targetNode) {
                let color;
                switch(rel.type) {
                    case 'family':
                        color = '#00f3ff';
                        break;
                    case 'school':
                        color = '#9933ff';
                        break;
                    case 'friend':
                        color = '#00ff88';
                        break;
                    default:
                        color = 'rgba(255, 255, 255, 0.3)';
                }
                
                edges.push({
                    source: sourceNode,
                    target: targetNode,
                    color: color
                });
            }
        });
        
        function applyForces() {
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const nodeA = nodes[i];
                    const nodeB = nodes[j];
                    
                    const dx = nodeB.x - nodeA.x;
                    const dy = nodeB.y - nodeA.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 100) {
                        const force = 1 / distance * 5;
                        const forceX = dx / distance * force;
                        const forceY = dy / distance * force;
                        
                        nodeA.x -= forceX;
                        nodeA.y -= forceY;
                        nodeB.x += forceX;
                        nodeB.y += forceY;
                    }
                }
            }
            
            edges.forEach(edge => {
                const dx = edge.target.x - edge.source.x;
                const dy = edge.target.y - edge.source.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance > 50) {
                    const force = (distance - 50) / 1000;
                    const forceX = dx * force;
                    const forceY = dy * force;
                    
                    edge.source.x += forceX;
                    edge.source.y += forceY;
                    edge.target.x -= forceX;
                    edge.target.y -= forceY;
                }
            });
            
            nodes.forEach(node => {
                if (node.x < node.radius) node.x = node.radius;
                if (node.x > canvas.width - node.radius) node.x = canvas.width - node.radius;
                if (node.y < node.radius) node.y = node.radius;
                if (node.y > canvas.height - node.radius) node.y = canvas.height - node.radius;
            });
        }
        
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            edges.forEach(edge => {
                ctx.beginPath();
                ctx.moveTo(edge.source.x, edge.source.y);
                ctx.lineTo(edge.target.x, edge.target.y);
                ctx.strokeStyle = edge.color;
                ctx.lineWidth = 2;
                ctx.stroke();
            });
            
            nodes.forEach(node => {
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
                ctx.fillStyle = node.color;
                ctx.fill();
                
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.radius - 3, 0, Math.PI * 2);
                ctx.fillStyle = '#121725';
                ctx.fill();
                
                ctx.font = 'bold 12px Arial';
                ctx.fillStyle = '#ffffff';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(node.name.charAt(0), node.x, node.y);
            });
        }
        
        const nodeInfo = document.getElementById('node-info');
        let hoveredNode = null;
        
        // Tratamento especial para dispositivos m√≥veis (toque)
        const isMobile = 'ontouchstart' in window;
        
        if (isMobile) {
            canvas.addEventListener('touchstart', function(event) {
                event.preventDefault();
                const touch = event.touches[0];
                checkHover(touch.clientX, touch.clientY);
            });
            
            canvas.addEventListener('touchmove', function(event) {
                event.preventDefault();
                const touch = event.touches[0];
                checkHover(touch.clientX, touch.clientY);
            });
            
            canvas.addEventListener('touchend', function() {
                if (hoveredNode) {
                    const profileId = hoveredNode.id;
                    openProfileModal(profileId);
                }
                nodeInfo.style.display = 'none';
                hoveredNode = null;
            });
        } else {
            canvas.addEventListener('mousemove', function(event) {
                checkHover(event.clientX, event.clientY);
            });
            
            canvas.addEventListener('mouseleave', function() {
                nodeInfo.style.display = 'none';
                hoveredNode = null;
            });
            
            canvas.addEventListener('click', function(event) {
                if (hoveredNode) {
                    const profileId = hoveredNode.id;
                    openProfileModal(profileId);
                }
            });
        }
        
        function checkHover(clientX, clientY) {
            const rect = canvas.getBoundingClientRect();
            const x = clientX - rect.left;
            const y = clientY - rect.top;
            
            hoveredNode = null;
            
            for (let i = 0; i < nodes.length; i++) {
                const node = nodes[i];
                const dx = x - node.x;
                const dy = y - node.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < node.radius) {
                    hoveredNode = node;
                    break;
                }
            }
            
            if (hoveredNode) {
                nodeInfo.style.display = 'block';
                
                // Posicionar info card de forma que fique sempre vis√≠vel na tela
                let leftPos = clientX + 10;
                let topPos = clientY + 10;
                
                // Verificar limites da tela
                const infoWidth = nodeInfo.offsetWidth;
                const infoHeight = nodeInfo.offsetHeight;
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;
                
                if (leftPos + infoWidth > windowWidth) {
                    leftPos = clientX - infoWidth - 10;
                }
                
                if (topPos + infoHeight > windowHeight) {
                    topPos = clientY - infoHeight - 10;
                }
                
                nodeInfo.style.left = leftPos + 'px';
                nodeInfo.style.top = topPos + 'px';
                
                document.getElementById('node-name').textContent = hoveredNode.name;
                document.getElementById('node-rm').textContent = hoveredNode.rm;
                document.getElementById('node-cpf').textContent = hoveredNode.cpf;
                document.getElementById('node-birth').textContent = hoveredNode.birth;
                document.getElementById('node-connections').textContent = hoveredNode.connections;
            } else {
                nodeInfo.style.display = 'none';
            }
        }
        
        function animate() {
            applyForces();
            draw();
            requestAnimationFrame(animate);
        }
        
        animate();
        
        window.addEventListener('resize', function() {
            canvas.width = canvasContainer.offsetWidth;
            canvas.height = canvasContainer.offsetHeight;
        });
    }, 1000);
}

function initConnectionGraph(profileId) {
    const canvas = document.getElementById('connection-canvas');
    const ctx = canvas.getContext('2d');
    
    const canvasContainer = canvas.parentElement;
    canvas.width = canvasContainer.offsetWidth;
    canvas.height = canvasContainer.offsetHeight;
    
    const centerNode = {
        id: parseInt(profileId),
        x: canvas.width / 2,
        y: canvas.height / 2,
        radius: 25,
        color: '#00f3ff',
        fixed: true
    };
    
    const nodes = [centerNode];
    
    const profileRelationships = relationships.filter(rel => 
        rel.source === centerNode.id || rel.target === centerNode.id
    );
    
    profileRelationships.forEach(rel => {
        const connectedId = rel.source === centerNode.id ? rel.target : rel.source;
        const connectedProfile = profiles.find(p => p.id === connectedId);
        
        if (connectedProfile) {
            const angle = Math.random() * Math.PI * 2;
            const distance = 100 + Math.random() * 50;
            
            let color;
            switch(rel.type) {
                case 'family':
                    color = '#00f3ff';
                    break;
                case 'school':
                    color = '#9933ff';
                    break;
                case 'friend':
                    color = '#00ff88';
                    break;
                default:
                    color = 'rgba(255,255,255,0.3)';
            }
            
            nodes.push({
                id: connectedProfile.id,
                x: centerNode.x + Math.cos(angle) * distance,
                y: centerNode.y + Math.sin(angle) * distance,
                radius: 20,
                color: color,
                name: connectedProfile.name,
                type: rel.type
            });
        }
    });
    
    const edges = [];
    
    nodes.forEach(node => {
        if (node.id !== centerNode.id) {
            edges.push({
                source: centerNode,
                target: node,
                color: node.color
            });
        }
    });
    
    function applyForces() {
        for (let i = 0; i < nodes.length; i++) {
            for (let j = i + 1; j < nodes.length; j++) {
                const nodeA = nodes[i];
                const nodeB = nodes[j];
                
                if (nodeA.fixed || nodeB.fixed) continue;
                
                const dx = nodeB.x - nodeA.x;
                const dy = nodeB.y - nodeA.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 70) {
                    const force = 1 / distance * 3;
                    const forceX = dx / distance * force;
                    const forceY = dy / distance * force;
                    
                    nodeA.x -= forceX;
                    nodeA.y -= forceY;
                    nodeB.x += forceX;
                    nodeB.y += forceY;
                }
            }
        }
        
        edges.forEach(edge => {
            if (edge.source.fixed && edge.target.fixed) return;
            
            const dx = edge.target.x - edge.source.x;
            const dy = edge.target.y - edge.source.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance > 100) {
                const force = (distance - 100) / 1000;
                const forceX = dx * force;
                const forceY = dy * force;
                
                if (!edge.source.fixed) {
                    edge.source.x += forceX;
                    edge.source.y += forceY;
                }
                
                if (!edge.target.fixed) {
                    edge.target.x -= forceX;
                    edge.target.y -= forceY;
                }
            }
        });
        
        nodes.forEach(node => {
            if (node.fixed) return;
            
            if (node.x < node.radius) node.x = node.radius;
            if (node.x > canvas.width - node.radius) node.x = canvas.width - node.radius;
            if (node.y < node.radius) node.y = node.radius;
            if (node.y > canvas.height - node.radius) node.y = canvas.height - node.radius;
        });
    }
    
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        edges.forEach(edge => {
            ctx.beginPath();
            ctx.moveTo(edge.source.x, edge.source.y);
            ctx.lineTo(edge.target.x, edge.target.y);
            ctx.strokeStyle = edge.color;
            ctx.lineWidth = 2;
            ctx.stroke();
        });
        
        nodes.forEach(node => {
            ctx.beginPath();
            ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
            ctx.fillStyle = node.color;
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(node.x, node.y, node.radius - 3, 0, Math.PI * 2);
            ctx.fillStyle = '#121725';
            ctx.fill();
            
            ctx.font = 'bold 12px Arial';
            ctx.fillStyle = '#ffffff';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(node.id === centerNode.id ? 'P' : node.name.charAt(0), node.x, node.y);
            
            if (node.id !== centerNode.id) {
                let label;
                switch(node.type) {
                    case 'family':
                        label = 'Fam√≠lia';
                        break;
                    case 'school':
                        label = 'Escola';
                        break;
                    case 'friend':
                        label = 'Amigo';
                        break;
                    default:
                        label = 'Conex√£o';
                }
                
                ctx.font = '10px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                ctx.fillText(label, node.x, node.y + node.radius + 12);
            }
        });
    }
    
    // Suporte para dispositivos de toque
    const isMobile = 'ontouchstart' in window;
    
    if (isMobile) {
        canvas.addEventListener('touchstart', function(event) {
            event.preventDefault();
            const touch = event.touches[0];
            checkNodeClick(touch.clientX, touch.clientY);
        });
    } else {
        canvas.addEventListener('click', function(event) {
            checkNodeClick(event.clientX, event.clientY);
        });
    }
    
    function checkNodeClick(clientX, clientY) {
        const rect = canvas.getBoundingClientRect();
        const x = clientX - rect.left;
        const y = clientY - rect.top;
        
        for (let i = 0; i < nodes.length; i++) {
            const node = nodes[i];
            if (node.id === centerNode.id) continue;
            
            const dx = x - node.x;
            const dy = y - node.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < node.radius) {
                openProfileModal(node.id);
                break;
            }
        }
    }
    
    updateConnectionsTable(profileId);
    
    function animate() {
        applyForces();
        draw();
        requestAnimationFrame(animate);
    }
    
    animate();
    
    window.addEventListener('resize', function() {
        canvas.width = canvasContainer.offsetWidth;
        canvas.height = canvasContainer.offsetHeight;
    });
}

function updateConnectionsTable(profileId) {
    const connectionsTable = document.getElementById('connections-table');
    connectionsTable.innerHTML = '';
    
    const profileRelationships = relationships.filter(rel => 
        rel.source == profileId || rel.target == profileId
    );
    
    if (profileRelationships.length === 0) {
        const emptyRow = document.createElement('tr');
        emptyRow.innerHTML = `
            <td colspan="4" style="text-align: center; color: rgba(255,255,255,0.5);">
                Nenhuma conex√£o encontrada para este perfil.
            </td>
        `;
        connectionsTable.appendChild(emptyRow);
        return;
    }
    
    profileRelationships.forEach(rel => {
        const connectedId = rel.source == profileId ? rel.target : rel.source;
        const connectedProfile = profiles.find(p => p.id == connectedId);
        
        if (connectedProfile) {
            const row = document.createElement('tr');
            
            let typeLabel, typeClass;
            switch(rel.type) {
                case 'family':
                    typeLabel = 'Fam√≠lia';
                    typeClass = 'blue';
                    break;
                case 'school':
                    typeLabel = 'Escola';
                    typeClass = 'purple';
                    break;
                case 'friend':
                    typeLabel = 'Amigos';
                    typeClass = 'green';
                    break;
                default:
                    typeLabel = 'Outro';
                    typeClass = '';
            }
            
            row.innerHTML = `
                <td>${connectedProfile.name}</td>
                <td><span class="badge badge--${typeClass}">${typeLabel}</span></td>
                <td>Alta</td>
                <td>03/06/2025</td>
            `;
            
            connectionsTable.appendChild(row);
        }
    });
}

function initFilters() {
    const filterBtn = document.getElementById('filter-btn');
    const filterModal = document.getElementById('filter-modal');
    const filterModalClose = document.getElementById('filter-modal-close');
    const applyFiltersBtn = document.getElementById('apply-filters');
    const clearFiltersBtn = document.getElementById('clear-filters');
    
    filterBtn.addEventListener('click', function() {
        filterModal.classList.add('active');
    });
    
    filterModalClose.addEventListener('click', function() {
        filterModal.classList.remove('active');
    });
    
    applyFiltersBtn.addEventListener('click', function() {
        activeFilters.status = document.getElementById('status-filter').value;
        activeFilters.gender = document.getElementById('gender-filter').value;
        activeFilters.age = document.getElementById('age-filter').value;
        
        if (showClassroom) {
            applyFilters();
        }
        
        filterModal.classList.remove('active');
        
        showNotification('Filtros aplicados', 'A lista de perfis foi atualizada', 'success');
    });
    
    clearFiltersBtn.addEventListener('click', function() {
        document.getElementById('status-filter').value = 'all';
        document.getElementById('gender-filter').value = 'all';
        document.getElementById('age-filter').value = 'all';
        
        activeFilters = {
            status: 'all',
            gender: 'all',
            age: 'all',
            search: activeFilters.search,
            classroom: activeFilters.classroom
        };
        
        if (showClassroom) {
            applyFilters();
        }
        
        showNotification('Filtros limpos', 'Todos os filtros foram removidos', 'info');
    });
}

function applyFilters() {
    let filteredProfiles = [...profiles];
    
    if (showClassroom) {
        filteredProfiles = filteredProfiles.filter(profile => profile.classroom === '1TDCPH');
    } else {
        filteredProfiles = [];
        document.getElementById('total-profiles').innerHTML = `
            <div class="stat__icon stat__icon--blue">
                <i class="fa fa-users"></i>
            </div>
            0
        `;
        populateProfilesTable(filteredProfiles);
        return;
    }
    
    if (activeFilters.status !== 'all') {
        filteredProfiles = filteredProfiles.filter(profile => profile.status === activeFilters.status);
    }
    
    if (activeFilters.gender !== 'all') {
        filteredProfiles = filteredProfiles.filter(profile => profile.gender === activeFilters.gender);
    }
    
    if (activeFilters.age !== 'all') {
        filteredProfiles = filteredProfiles.filter(profile => {
            const age = calculateAge(profile.birth);
            if (!age) return false;
            
            switch (activeFilters.age) {
                case '18-19':
                    return age >= 18 && age <= 19;
                case '20-21':
                    return age >= 20 && age <= 21;
                case '22-23':
                    return age >= 22 && age <= 23;
                case '24+':
                    return age >= 24;
                default:
                    return true;
            }
        });
    }
    
    if (activeFilters.search) {
        const searchTerm = activeFilters.search.toLowerCase();
        filteredProfiles = filteredProfiles.filter(profile => 
            profile.name.toLowerCase().includes(searchTerm) ||
            profile.rm.toLowerCase().includes(searchTerm) ||
            profile.cpf.toLowerCase().includes(searchTerm) ||
            (profile.mother && profile.mother.toLowerCase().includes(searchTerm))
        );
    }
    
    populateProfilesTable(filteredProfiles);
    
    document.getElementById('total-profiles').innerHTML = `
        <div class="stat__icon stat__icon--blue">
            <i class="fa fa-users"></i>
        </div>
        ${filteredProfiles.length}
    `;
}

function initSearch() {
    const searchInput = document.getElementById('search-input');
    
    searchInput.addEventListener('input', function() {
        activeFilters.search = this.value.trim();
        
        if (activeFilters.search) {
            showClassroom = true;
            document.getElementById('classroom-btn').textContent = 'Ocultar Perfis 1TDCPH';
        }
        
        applyFilters();
        
        if (activeFilters.search && document.querySelector('#profiles-table tbody').children.length === 0) {
            showNotification('Busca', 'Nenhum perfil encontrado com os crit√©rios de busca', 'warning');
        }
    });
}

function initProfileModal() {
    const profileModal = document.getElementById('profile-modal');
    const profileModalClose = document.getElementById('profile-modal-close');
    
    profileModalClose.addEventListener('click', function() {
        profileModal.classList.remove('active');
    });
    
    const tabs = document.querySelectorAll('.tab');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            tabs.forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            this.classList.add('active');
            document.getElementById(`${tabId}-tab`).classList.add('active');
        });
    });
}

function openProfileModal(profileId) {
    currentProfileId = profileId;
    const profile = profiles.find(p => p.id == profileId);
    
    if (profile) {
        document.getElementById('profile-name').textContent = profile.name;
        document.getElementById('profile-rm').textContent = profile.rm;
        document.getElementById('profile-birth').textContent = profile.birth;
        document.getElementById('profile-cpf').textContent = profile.cpf;
        document.getElementById('profile-password').textContent = profile.password;
        document.getElementById('profile-mother').textContent = profile.mother;
        
        const statusEl = document.getElementById('profile-status');
        statusEl.innerHTML = '';
        const statusSpan = document.createElement('span');
        statusSpan.className = `data-table__status data-table__status--${profile.status}`;
        statusSpan.textContent = profile.status === 'active' ? 'Verificado' : 
                               profile.status === 'pending' ? 'Pendente' : 'Inativo';
        statusEl.appendChild(statusSpan);
        
        const profileImage = document.getElementById('profile-image');
        profileImage.textContent = profile.name.charAt(0);
        
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelector('.tab[data-tab="connections"]').classList.add('active');
        document.getElementById('connections-tab').classList.add('active');
        
        initConnectionGraph(profileId);
        
        document.getElementById('profile-modal').classList.add('active');
    }
}

function initAnalysisModal() {
    const scanBtn = document.getElementById('scan-btn');
    const analysisModal = document.getElementById('analysis-modal');
    const analysisModalClose = document.getElementById('analysis-modal-close');
    const cancelAnalysisBtn = document.getElementById('cancel-analysis');
    const startAnalysisBtn = document.getElementById('start-analysis');
    
    scanBtn.addEventListener('click', function() {
        analysisModal.classList.add('active');
    });
    
    analysisModalClose.addEventListener('click', function() {
        analysisModal.classList.remove('active');
    });
    
    cancelAnalysisBtn.addEventListener('click', function() {
        analysisModal.classList.remove('active');
    });
    
    startAnalysisBtn.addEventListener('click', function() {
        const name = document.getElementById('analysis-name').value;
        const doc = document.getElementById('analysis-doc').value;
        
        if (!name || !doc) {
            showNotification('Campos obrigat√≥rios', 'Preencha nome e documento para iniciar a an√°lise', 'warning');
            return;
        }
        
        analysisModal.classList.remove('active');
        
        document.getElementById('network-loading').classList.add('active');
        
        showNotification('An√°lise iniciada', 'Coletando informa√ß√µes de fontes abertas...', 'info');
        
        setTimeout(() => {
            document.getElementById('network-loading').classList.remove('active');
            
            const newId = profiles.length + 1;
            const newProfile = {
                id: newId,
                name: name,
                rm: "999999",
                birth: "01/01/2000",
                cpf: doc,
                gender: "M",
                mother: "Sem informa√ß√£o",
                status: "pending",
                classroom: "1TDCPH",
                password: "010100"
            };
            
            profiles.push(newProfile);
            
            const randomConnections = Math.floor(Math.random() * 3) + 1;
            for (let i = 0; i < randomConnections; i++) {
                const targetId = Math.floor(Math.random() * 15) + 1;
                const types = ['school', 'friend', 'family'];
                const randomType = types[Math.floor(Math.random() * types.length)];
                
                relationships.push({
                    source: newId,
                    target: targetId,
                    type: randomType
                });
            }
            
            if (showClassroom) {
                applyFilters();
            }
            
            initNetworkGraph();
            
            showNotification('An√°lise conclu√≠da', `${randomConnections} novas conex√µes encontradas`, 'success');
            
            document.getElementById('analysis-name').value = '';
            document.getElementById('analysis-doc').value = '';
        }, 3000);
    });
}

function populateProfilesTable(data) {
    const tableBody = document.querySelector('#profiles-table tbody');
    tableBody.innerHTML = '';
    
    if (data.length === 0) {
        const emptyRow = document.createElement('tr');
        emptyRow.innerHTML = `
            <td colspan="8" style="text-align: center; color: rgba(255,255,255,0.5);">
                Nenhum perfil encontrado com os crit√©rios selecionados.
            </td>
        `;
        tableBody.appendChild(emptyRow);
        return;
    }
    
    data.forEach(profile => {
        const row = document.createElement('tr');
        row.classList.add('profile-row');
        row.setAttribute('data-id', profile.id);
        
        let statusText = '';
        switch(profile.status) {
            case 'active':
                statusText = 'Verificado';
                break;
            case 'pending':
                statusText = 'Pendente';
                break;
            case 'inactive':
                statusText = 'Inativo';
                break;
        }
        
        row.innerHTML = `
            <td>${profile.name}</td>
            <td>${profile.rm}</td>
            <td>${profile.birth}</td>
            <td>${profile.cpf}</td>
            <td>${profile.password}</td>
            <td>${profile.mother}</td>
            <td><span class="data-table__status data-table__status--${profile.status}">${statusText}</span></td>
            <td>
                <div class="data-table__actions">
                    <div class="data-table__action edit-profile" data-id="${profile.id}">
                        <i class="fa fa-edit"></i>
                    </div>
                    <div class="data-table__action view-profile" data-id="${profile.id}">
                        <i class="fa fa-user"></i>
                    </div>
                </div>
            </td>
        `;
        
        tableBody.appendChild(row);
    });
    
    document.querySelectorAll('.view-profile').forEach(button => {
        button.addEventListener('click', function() {
            const profileId = this.getAttribute('data-id');
            openProfileModal(profileId);
        });
    });
    
    document.querySelectorAll('.edit-profile').forEach(button => {
        button.addEventListener('click', function() {
            const profileId = this.getAttribute('data-id');
            showNotification('Edi√ß√£o de perfil', `Editando perfil ID ${profileId}`, 'info');
        });
    });
}

function showNotification(title, message, type) {
    const notification = document.getElementById('notification');
    const notificationIcon = notification.querySelector('.notification__icon');
    const notificationTitle = notification.querySelector('.notification__title');
    const notificationMessage = notification.querySelector('.notification__message');
    
    notificationIcon.style.background = '';
    notificationIcon.style.color = '';
    
    switch(type) {
        case 'success':
            notificationIcon.style.background = 'rgba(0, 255, 136, 0.1)';
            notificationIcon.style.color = 'var(--success)';
            notificationIcon.innerHTML = '<i class="fa fa-check"></i>';
            break;
        case 'warning':
            notificationIcon.style.background = 'rgba(255, 204, 0, 0.1)';
            notificationIcon.style.color = 'var(--warning)';
            notificationIcon.innerHTML = '<i class="fa fa-warning"></i>';
            break;
        case 'error':
            notificationIcon.style.background = 'rgba(255, 51, 102, 0.1)';
            notificationIcon.style.color = 'var(--danger)';
            notificationIcon.innerHTML = '<i class="fa fa-warning"></i>';
            break;
        default:
            notificationIcon.style.background = 'rgba(0, 243, 255, 0.1)';
            notificationIcon.style.color = 'var(--primary)';
            notificationIcon.innerHTML = '<i class="fa fa-info"></i>';
    }
    
    notificationTitle.textContent = title;
    notificationMessage.textContent = message;
    
    notification.classList.add('active');
    
    setTimeout(() => {
        notification.classList.remove('active');
    }, 5000);
}

function handleProfileEdit() {
    const profileId = this.getAttribute('data-id');
    
    showNotification('Modo de edi√ß√£o', 'Editando perfil ID: ' + profileId, 'info');
}

document.addEventListener('DOMContentLoaded', function() {
    const isLoggedIn = sessionStorage.getItem('mk_osint_logged_in');
    
    if (isLoggedIn) {
        document.getElementById('login-screen').style.display = 'none';
        initSystem();
    }
    
    document.querySelectorAll('.edit-profile').forEach(button => { 
        button.addEventListener('click', handleProfileEdit); 
    });
    
    // Mostrar dica de senha ao carregar (em dispositivos m√≥veis)
    setTimeout(function() {
        if (window.innerWidth <= 768) {
            showNotification('Dica de Acesso', 'Senha: fiaph', 'info');
        }
    }, 1000);
});
    </script>
</body>
</html>
